<!DOCTYPE html>
<html ng-app="andale">
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Amarante' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="style.css">
  </head>
  <body ng-controller="MainController">
    
    <div ng-show="newBrandForm || newProductForm || editBrandForm || editProductForm">
      <div class="hazy-background"></div>
      <div class="form-box">
        <!-- new -->
        <brand-form ng-show="newBrandForm" is-new="true"
          cancel="newBrandForm = false" submit="addBrand"></brand-form>
        <product-form ng-show="newProductForm" is-new="true"
          cancel="newProductForm = false" submit="addProduct"></product-form>
      
        <!-- edit -->
        <brand-form ng-show="editBrandForm" old-brand="oldItem"
          cancel="editBrandForm = false" submit="saveBrand" remove="removeBrand"></brand-form>
        <product-form ng-show="editProductForm" old-product="oldItem"
          cancel="editProductForm = false" submit="saveProduct" remove="removeProduct"></product-form>
      </div>
    </div>
    
    <div class="title red-bg text-center"><strong>Andale</strong></div>
    <div class="subtitle-container text-muted text-center">
      <div class="text-muted">FIND IT FAST</div>
    </div>


    <div class="command-container red-bg container-fluid" set-class-when-at-top="sticky">
      <div class="command-bar row">
        <div class="col-xs-12">
          <div class="input-group">
            <span class="search-master-icon glyphicon glyphicon-search"></span>
            <input class="form-control" ng-model="search" placeholder="Search brand or product"/>
            <span class="command-menu input-group-btn">
              <button class="btn btn-primary" ng-click="showCommandTray()">
                <span class="glyphicon glyphicon-menu-hamburger"></span>
              </button>
            </span>
            <span class="command-buttons input-group-btn">
              <button class="btn btn-primary" ng-click="newBrandForm = true">Add Brand</button>
              <button class="btn btn-primary" ng-click="newProductForm = true">Add Product</button>
            </span>
          </div>
        </div>
      </div>
      <div class="command-tray row" ng-show="commandTray">
        <button class="col-xs-3 col-xs-offset-2 btn btn-primary" ng-click="newBrandForm = true">Add Brand</button>
        <button class="col-xs-3 col-xs-offset-2 btn btn-primary" ng-click="newProductForm = true">Add Product</button>
      </div>
    </div>
    
    <div class="main-container container">
      <!-- DATA -->
      <div ng-repeat="brand in brands | filter:search"
      ng-init="editShow=false">
        <div ng-mouseover="brandMouseOver= true" ng-mouseleave="brandMouseOver = false"
          class="brand-header-container">
          <a href={{brand.url}} target='_blank'>
            <div class="brand-header">
              <img ng-src="{{brand.logo}}">
              <div ng-show="brand.showName">{{brand.name}}</div>
            </div>
          </a>
          <div>{{brand.phone}}</div>
          <div class="brand-edit">
            <span ng-show="brandMouseOver" class="glyphicon glyphicon-pencil"
              aria-label="EDIT" ng-click="editBrand(brand)"></span>
          </div>
        </div>
        <hr class="hr-brand">
        
        <!-- PRODUCTS -->
        <div ng-mouseover="mouseOver = true" ng-mouseleave="mouseOver = false"
          ng-repeat="product in products | filter:filterProducts(brand.$id) | filter:search"
          ng-init="editShow=false">
            <div class="product-header">
              <div class="product-title-container">
                <div class="product-title">
                  <a href={{product.url}} target='_blank'>{{product.name}}</a>
                </div>
                <div class="product-subtitle">
                  {{product.subtitle}}
                  <h6>HEY</h6>
                  <span class="glyphicon glyphicon-picture" aria-hidden="true"></span>
                </div>
              </div>
              <div class="product-thumbnail-container">
                <div class="product-thumbnail-box" ng-repeat="img in product.images track by $index" ng-click="productImgSelect(product, $index)">
                  <img ng-src={{img}} render-thumbnail>
                </div>
              </div>
            </div>

            <div class="product-buttons">
              <button type="button" class="btn btn-default" ng-if="product.images" ng-click="product.showImg = !product.showImg; product.imgToShow = 0" title="Show Images" aria-label="Show Images">
                <span class="glyphicon glyphicon-picture" aria-hidden="true"></span>
              </button><!--
              --><button type="button" class="btn btn-default" ng-if="product.specs" ng-click="product.showSpecs = !product.showSpecs" title="Show Specs" aria-label="Show Specs">
                <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
              </button><!--
              --><a class="product-manual" ng-if="product.manualUrl" href={{product.manualUrl}} target='_blank'><!--
                --><button type="button" class="btn btn-default" title="Open Manual" aria-label="Open Manual">
                  <span class="glyphicon glyphicon-book" aria-hidden="true"></span>
                </button><!--
              --></a><!--
              --><button type="button" class="btn btn-default faq-button" ng-if="product.faqs" ng-click="product.showFaqs = !product.showFaqs" title="Show FAQ's" aria-label="Show F.A.Q.'s">
                <span aria-hidden="true"><strong>?</strong></span>
              </button>
            </div>
            
            <div ng-if="product.showImg">
              <div class="product-img-buttons-container">
                <i  class="fa fa-arrow-left" ng-click="productImgScroll(false, product, product.images.length)"></i><!--
             --><i class="fa fa-arrow-right" ng-click="productImgScroll(true, product, product.images.length)"></i>
              </div>
              <div class="product-img-container">
                <img ng-src={{product.images[product.imgToShow]}}>
              </div>
            </div>
            
            <div class="product-specs-container" ng-if="product.showSpecs">
              <p>{{product.specs}}</p>
            </div>

            <div class="product-warranty-container">
              <h4><strong>Warranty</strong> - {{product.warranty}}</h4>
              <div ng-show="mouseOver" class="glyphicon glyphicon-pencil product-edit"
                aria-label="EDIT" ng-click="editProduct(product)"></div>
            </div>
            <hr class="hr-product">
            
          </div>
      </div>
    </div>

    <script src="http://code.jquery.com/jquery-2.1.4.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-sanitize.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/1.1.3/angularfire.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/MainController.js"></script>
    <script src="js/dataService.js"></script>
    <script src="js/directives.js"></script>
  </body>

</html>
